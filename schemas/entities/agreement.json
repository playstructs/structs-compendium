{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "version": "1.0.0",
  "title": "Agreement Entity Schema",
  "description": "Agreement entity definition - extracted from game-state.json for context window optimization. See schemas/formats.json for format specifications.",
  "type": "object",
  "structs:entity": "Agreement",
  "structs:endpoint": "/structs/agreement/{id}",
  "structs:category": "economic",
  "properties": {
    "id": {
      "type": "string",
      "structs:format": "entity-id",
      "pattern": "^11-[0-9]+$",
      "description": "Unique agreement identifier in format 'type-index' (e.g., '11-1' for agreement type 11, index 1). Type 11 = Agreement."
    },
    "providerId": {
      "type": "string",
      "structs:format": "entity-id",
      "pattern": "^10-[0-9]+$",
      "structs:relationship": "Provider",
      "description": "Provider ID for this agreement. Format: 'type-index' (e.g., '10-1' for provider type 10, index 1). Type 10 = Provider."
    },
    "consumerId": {
      "type": "string",
      "structs:format": "entity-id",
      "pattern": "^1-[0-9]+$",
      "structs:relationship": "Player",
      "description": "Consumer (player) ID for this agreement. Format: 'type-index' (e.g., '1-11' for player type 1, index 11). Type 1 = Player."
    },
    "gridAttributes": {
      "type": "object",
      "description": "Grid position and attributes",
      "additionalProperties": true
    }
  },
  "required": ["id", "providerId", "consumerId"],
  "structs:relationships": {
    "provider": "schemas/entities/provider.json",
    "consumer": "schemas/entities/player.json"
  },
  "structs:verification": {
    "verified": true,
    "verifiedBy": "GameCodeAnalyst",
    "verifiedDate": "2025-01-XX",
    "verificationMethod": "code-analysis",
    "confidence": "high",
    "note": "API response schema. Missing fields from database (allocationId, capacity, startBlock, endBlock, creator, owner) - these may be in gridAttributes or separate queries. For code-based field definitions, see schemas/entities.json#/definitions/Agreement",
    "codeReference": "x/structs/types/agreement.pb.go, x/structs/keeper/agreement_cache.go",
    "databaseReference": "structs.agreement table (columns: id, provider_id, allocation_id, capacity, start_block, end_block, creator, owner)",
    "verifiedFields": ["id", "providerId", "consumerId"],
    "missingFields": ["allocationId", "capacity", "startBlock", "endBlock", "creator", "owner"]
  }
}

